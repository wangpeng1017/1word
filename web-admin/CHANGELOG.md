# Changelog

## [0.2.0] - 2025-11-07

### ✨ 新增功能

#### 题目管理系统
- ✅ **完整的题目CRUD功能**
  - 题目列表展示（分页、筛选）
  - 新增题目（支持4种题型）
  - 编辑题目（更新内容和选项）
  - 删除题目（单个/批量）
  - 批量导入（Excel文件）
  - 下载模板

- ✅ **4种题型支持**
  - 中译英 (CHINESE_TO_ENGLISH)
  - 英译中 (ENGLISH_TO_CHINESE)
  - 选词填空 (FILL_IN_BLANK)
  - 听力题 (LISTENING)

- ✅ **智能筛选功能**
  - 按词汇筛选
  - 按题型筛选
  - 从词汇管理页面一键跳转并自动筛选

- ✅ **批量导入功能**
  - Excel格式支持
  - 自动创建不存在的词汇
  - 详细的错误提示
  - 200个题目的导入支持

#### 词汇管理增强
- ✅ **音频管理**
  - 美式音频URL编辑
  - 英式音频URL编辑
  - 音频播放器集成

- ✅ **图片管理**
  - 图片URL编辑
  - 图片描述编辑
  - 图片预览支持

- ✅ **词汇-题目联动**
  - 点击词汇的"题目"按钮
  - 自动跳转到题目管理页面
  - 自动筛选该词汇的所有题目

### 🔧 技术改进

#### 后端优化
- ✅ **数据库模型适配**
  - 修复PostgreSQL schema字段名称映射
  - 添加snake_case到camelCase的数据转换层
  - 支持生产环境和开发环境的schema差异

- ✅ **API接口完善**
  - 题目管理5个RESTful接口
  - 批量导入接口优化（移除事务避免超时）
  - 数据格式转换以匹配前端期望

- ✅ **Prisma集成**
  - 自动生成Prisma Client
  - 数据库推送和迁移
  - 关联查询优化

#### 前端优化
- ✅ **Next.js 15适配**
  - 修复useSearchParams的Suspense问题
  - 使用window.location.search替代
  - 客户端渲染优化

- ✅ **用户体验提升**
  - 加载状态显示
  - 错误提示优化
  - 表单验证增强
  - 筛选条件持久化

### 📚 文档完善
- ✅ **完整的技术文档**
  - [题目管理功能文档](./docs/testword.md) - 60+ 页详细说明
  - [文档中心索引](./docs/README.md) - 统一文档入口
  - API接口文档
  - 数据模型文档

- ✅ **开发文档**
  - Excel导入模板说明
  - 批量导入流程指南
  - 数据初始化脚本说明
  - 常见问题排查

### 🐛 Bug修复
- ✅ 修复Prisma模型名称不匹配问题（vocabulary → vocabularies）
- ✅ 修复字段名称映射问题（camelCase ↔ snake_case）
- ✅ 修复批量导入事务超时问题
- ✅ 修复Next.js构建时的useSearchParams错误
- ✅ 修复API返回数据格式与前端不匹配问题

### 📊 数据支持
- ✅ **testword.md数据源**
  - 50个高考核心词汇
  - 200个高质量题目
  - 完整的题型覆盖
  - Excel导入文件生成

- ✅ **数据初始化**
  - 一键初始化脚本
  - 测试账号和班级
  - 学习计划和任务
  - 数据验证脚本

### 🔐 安全性
- ✅ JWT认证保护所有API
- ✅ 教师权限控制（创建/编辑/删除）
- ✅ 数据验证和清理
- ✅ SQL注入防护（Prisma ORM）

### 🚀 性能优化
- ✅ 分页查询减少数据传输
- ✅ 索引优化（词汇ID、题型）
- ✅ 懒加载音频和图片
- ✅ 客户端缓存优化

---

## [0.1.0] - 2025-11-06

### 初始版本
- ✅ 基础词汇管理
- ✅ 用户认证系统
- ✅ 学生和班级管理
- ✅ 基础数据模型

---

## 版本说明

### 语义化版本
- **主版本号**：重大架构变更或不兼容的API修改
- **次版本号**：新增功能（向后兼容）
- **修订号**：Bug修复（向后兼容）

### 里程碑
- **v0.1.0**: 基础功能完成
- **v0.2.0**: 词汇和题目管理完成 ✅
- **v0.3.0**: 学习计划和任务系统（规划中）
- **v0.4.0**: 学习记录和统计（规划中）
- **v1.0.0**: 正式发布版本（规划中）

---

## 贡献者
- AI助手 - 系统设计与开发
- 产品团队 - 需求定义与测试

## 反馈
如有问题或建议，请通过以下方式联系：
- GitHub Issues: [项目仓库](https://github.com/wangpeng1017/1word)
- 邮件: support@example.com

---

**发布日期**: 2025年11月7日  
**构建状态**: ✅ 已发布  
**部署环境**: Vercel Production  
**数据库**: PostgreSQL (Prisma Cloud)
