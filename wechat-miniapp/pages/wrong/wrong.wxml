<!--pages/wrong/wrong.wxml-->
<view class="container">
  <!-- æ ‡é¢˜æ  -->
  <view class="header">
    <text class="header-title">é”™é¢˜æœ¬</text>
    <text class="header-count">å…± {{filteredQuestions.length}} é¢˜</text>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{isLoading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:elif="{{isEmpty}}" class="empty">
    <text class="empty-icon">ğŸ“š</text>
    <text class="empty-text">è¿˜æ²¡æœ‰é”™é¢˜</text>
    <text class="empty-hint">ç»§ç»­å­¦ä¹ ç§¯ç´¯è¯æ±‡å§</text>
  </view>

  <!-- é”™é¢˜åˆ—è¡¨ -->
  <view wx:else class="content">
    <!-- ç­›é€‰å™¨ -->
    <scroll-view class="filter-tabs" scroll-x>
      <view 
        class="filter-item {{currentFilter === 'ALL' ? 'active' : ''}}"
        data-type="ALL"
        bindtap="filterByType"
      >
        å…¨éƒ¨ ({{wrongQuestions.length}})
      </view>
      <view 
        class="filter-item {{currentFilter === 'ENGLISH_TO_CHINESE' ? 'active' : ''}}"
        data-type="ENGLISH_TO_CHINESE"
        bindtap="filterByType"
      >
        è‹±é€‰æ±‰ ({{stats.byType.ENGLISH_TO_CHINESE || 0}})
      </view>
      <view 
        class="filter-item {{currentFilter === 'CHINESE_TO_ENGLISH' ? 'active' : ''}}"
        data-type="CHINESE_TO_ENGLISH"
        bindtap="filterByType"
      >
        æ±‰é€‰è‹± ({{stats.byType.CHINESE_TO_ENGLISH || 0}})
      </view>
      <view 
        class="filter-item {{currentFilter === 'LISTENING' ? 'active' : ''}}"
        data-type="LISTENING"
        bindtap="filterByType"
      >
        å¬éŸ³ ({{stats.byType.LISTENING || 0}})
      </view>
      <view 
        class="filter-item {{currentFilter === 'FILL_IN_BLANK' ? 'active' : ''}}"
        data-type="FILL_IN_BLANK"
        bindtap="filterByType"
      >
        å¡«ç©º ({{stats.byType.FILL_IN_BLANK || 0}})
      </view>
    </scroll-view>

    <!-- é”™é¢˜åˆ—è¡¨ -->
    <view class="question-list">
      <view 
        wx:for="{{filteredQuestions}}" 
        wx:key="id"
        class="question-item"
        data-index="{{index}}"
        bindtap="viewDetail"
      >
        <view class="question-header">
          <view class="word">{{item.vocabulary.word}}</view>
          <view class="type-badge">
            <text wx:if="{{item.question.type === 'ENGLISH_TO_CHINESE'}}">è‹±é€‰æ±‰</text>
            <text wx:elif="{{item.question.type === 'CHINESE_TO_ENGLISH'}}">æ±‰é€‰è‹±</text>
            <text wx:elif="{{item.question.type === 'LISTENING'}}">å¬éŸ³</text>
            <text wx:elif="{{item.question.type === 'FILL_IN_BLANK'}}">å¡«ç©º</text>
          </view>
        </view>
        
        <view class="question-content">
          <view class="answer-row">
            <text class="label wrong-label">ä½ çš„ç­”æ¡ˆï¼š</text>
            <text class="value wrong-value">{{item.wrongAnswer}}</text>
          </view>
          <view class="answer-row">
            <text class="label correct-label">æ­£ç¡®ç­”æ¡ˆï¼š</text>
            <text class="value correct-value">{{item.correctAnswer}}</text>
          </view>
        </view>

        <view class="meaning">
          {{item.vocabulary.primaryMeaning}}
        </view>
      </view>
    </view>
  </view>
</view>
