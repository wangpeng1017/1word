<!--pages/index/index.wxml-->
<view class="container">
  <!-- 欢迎区域 -->
  <view class="welcome-section card">
    <text class="title-medium">你好，{{userName}}</text>
    <text class="text-secondary mt-2">今天也要加油学习哦！</text>
  </view>

  <!-- 今日复习 -->
  <view class="study-card card mt-3" bindtap="goToStudy">
    <view class="study-header">
      <view class="study-icon">📚</view>
      <view class="study-info">
        <text class="title-small">今日复习</text>
        <text class="text-secondary mt-1">{{todayWordCount}} 个单词待复习</text>
      </view>
    </view>
    <view class="study-progress mt-3">
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{todayProgress}}%"></view>
      </view>
      <text class="progress-text">{{completedCount}}/{{todayWordCount}}</text>
    </view>
  </view>

  <!-- 学习统计 -->
  <view class="stats-section mt-3">
    <view class="stat-card card">
      <text class="stat-number text-success">{{masteredCount}}</text>
      <text class="stat-label text-secondary">已掌握</text>
    </view>
    <view class="stat-card card">
      <text class="stat-number text-warning">{{difficultCount}}</text>
      <text class="stat-label text-secondary">重点难点</text>
    </view>
    <view class="stat-card card">
      <text class="stat-number text-primary">{{totalStudyDays}}</text>
      <text class="stat-label text-secondary">学习天数</text>
    </view>
  </view>

  <!-- 错题本入口 -->
  <view class="wrong-card card mt-3" bindtap="goToWrong">
    <view class="flex justify-between items-center">
      <view>
        <text class="title-small">错题本</text>
        <text class="text-secondary mt-1">{{wrongCount}} 道错题</text>
      </view>
      <text class="arrow">→</text>
    </view>
  </view>

  <!-- 继续上次复习提示 -->
  <view class="resume-modal" wx:if="{{showResumeModal}}">
    <view class="modal-mask" bindtap="closeResumeModal"></view>
    <view class="modal-content card">
      <text class="title-small">检测到未完成的复习</text>
      <text class="text-secondary mt-2">是否继续上次的复习？</text>
      <view class="modal-actions mt-4">
        <button class="btn-secondary" bindtap="startNewStudy">重新开始</button>
        <button class="btn-primary" bindtap="resumeStudy">继续复习</button>
      </view>
    </view>
  </view>
</view>
